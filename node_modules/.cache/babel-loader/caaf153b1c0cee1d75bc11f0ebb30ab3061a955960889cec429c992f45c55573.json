{"ast":null,"code":"import axios from 'axios';\nimport { store } from '../redux/store';\nimport { logout } from '../redux/slices/authSlice';\nclass ApiService {\n  constructor() {\n    this.api = void 0;\n    this.api = axios.create({\n      baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8001',\n      timeout: 30000,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n\n    // Request interceptor to add auth token\n    this.api.interceptors.request.use(config => {\n      // Temporarily disabled authentication for testing\n      // Clear any stored tokens\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n\n      // const token = localStorage.getItem('token');\n      // if (token) {\n      //   config.headers.Authorization = `Bearer ${token}`;\n      // }\n      return config;\n    }, error => {\n      return Promise.reject(error);\n    });\n\n    // Response interceptor to handle auth errors\n    this.api.interceptors.response.use(response => response, error => {\n      var _error$response;\n      if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n        store.dispatch(logout());\n      }\n      return Promise.reject(error);\n    });\n  }\n  async get(url, config) {\n    return this.api.get(url, config);\n  }\n  async post(url, data, config) {\n    return this.api.post(url, data, config);\n  }\n  async put(url, data, config) {\n    return this.api.put(url, data, config);\n  }\n  async delete(url, config) {\n    return this.api.delete(url, config);\n  }\n  async patch(url, data, config) {\n    return this.api.patch(url, data, config);\n  }\n\n  // Upload file with progress tracking\n  async uploadFile(url, file, onProgress, config) {\n    const formData = new FormData();\n    formData.append('file', file);\n    return this.api.post(url, formData, {\n      ...config,\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        ...(config === null || config === void 0 ? void 0 : config.headers)\n      },\n      onUploadProgress: progressEvent => {\n        if (onProgress && progressEvent.total) {\n          const progress = Math.round(progressEvent.loaded * 100 / progressEvent.total);\n          onProgress(progress);\n        }\n      }\n    });\n  }\n\n  // Download file\n  async downloadFile(url, filename) {\n    const response = await this.api.get(url, {\n      responseType: 'blob'\n    });\n    const blob = new Blob([response.data]);\n    const downloadUrl = window.URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = downloadUrl;\n    link.download = filename || 'download';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    window.URL.revokeObjectURL(downloadUrl);\n  }\n\n  // Set auth token\n  setAuthToken(token) {\n    localStorage.setItem('token', token);\n    this.api.defaults.headers.common.Authorization = `Bearer ${token}`;\n  }\n\n  // Remove auth token\n  removeAuthToken() {\n    localStorage.removeItem('token');\n    delete this.api.defaults.headers.common.Authorization;\n  }\n}\nexport const apiService = new ApiService();","map":{"version":3,"names":["axios","store","logout","ApiService","constructor","api","create","baseURL","process","env","REACT_APP_API_URL","timeout","headers","interceptors","request","use","config","localStorage","removeItem","error","Promise","reject","response","_error$response","status","dispatch","get","url","post","data","put","delete","patch","uploadFile","file","onProgress","formData","FormData","append","onUploadProgress","progressEvent","total","progress","Math","round","loaded","downloadFile","filename","responseType","blob","Blob","downloadUrl","window","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","setAuthToken","token","setItem","defaults","common","Authorization","removeAuthToken","apiService"],"sources":["/Users/miko/Documents/Project/real_projects/Snipix_web/src/services/apiService.ts"],"sourcesContent":["import axios, { AxiosInstance, AxiosResponse, AxiosRequestConfig } from 'axios';\nimport { store } from '../redux/store';\nimport { logout } from '../redux/slices/authSlice';\n\nclass ApiService {\n  private api: AxiosInstance;\n\n  constructor() {\n    this.api = axios.create({\n      baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8001',\n      timeout: 30000,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    // Request interceptor to add auth token\n    this.api.interceptors.request.use(\n      (config) => {\n        // Temporarily disabled authentication for testing\n        // Clear any stored tokens\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        \n        // const token = localStorage.getItem('token');\n        // if (token) {\n        //   config.headers.Authorization = `Bearer ${token}`;\n        // }\n        return config;\n      },\n      (error) => {\n        return Promise.reject(error);\n      }\n    );\n\n    // Response interceptor to handle auth errors\n    this.api.interceptors.response.use(\n      (response) => response,\n      (error) => {\n        if (error.response?.status === 401) {\n          store.dispatch(logout());\n        }\n        return Promise.reject(error);\n      }\n    );\n  }\n\n  async get<T = any>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.api.get<T>(url, config);\n  }\n\n  async post<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.api.post<T>(url, data, config);\n  }\n\n  async put<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.api.put<T>(url, data, config);\n  }\n\n  async delete<T = any>(url: string, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.api.delete<T>(url, config);\n  }\n\n  async patch<T = any>(url: string, data?: any, config?: AxiosRequestConfig): Promise<AxiosResponse<T>> {\n    return this.api.patch<T>(url, data, config);\n  }\n\n  // Upload file with progress tracking\n  async uploadFile<T = any>(\n    url: string,\n    file: File,\n    onProgress?: (progress: number) => void,\n    config?: AxiosRequestConfig\n  ): Promise<AxiosResponse<T>> {\n    const formData = new FormData();\n    formData.append('file', file);\n\n    return this.api.post<T>(url, formData, {\n      ...config,\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        ...config?.headers,\n      },\n      onUploadProgress: (progressEvent) => {\n        if (onProgress && progressEvent.total) {\n          const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\n          onProgress(progress);\n        }\n      },\n    });\n  }\n\n  // Download file\n  async downloadFile(url: string, filename?: string): Promise<void> {\n    const response = await this.api.get(url, {\n      responseType: 'blob',\n    });\n\n    const blob = new Blob([response.data]);\n    const downloadUrl = window.URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = downloadUrl;\n    link.download = filename || 'download';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    window.URL.revokeObjectURL(downloadUrl);\n  }\n\n  // Set auth token\n  setAuthToken(token: string): void {\n    localStorage.setItem('token', token);\n    this.api.defaults.headers.common.Authorization = `Bearer ${token}`;\n  }\n\n  // Remove auth token\n  removeAuthToken(): void {\n    localStorage.removeItem('token');\n    delete this.api.defaults.headers.common.Authorization;\n  }\n}\n\nexport const apiService = new ApiService();\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}